---
title: Redis란?
date: 2024-03-02 00:00:00 +09:00
categories: [redis, cache, 캐시]
tags: [redis]
image: /assets/img/redis.png
---

### 📌Redis란?

**`Redis란`**: **Remote Dictionary Server**의 약자로서, " **key-value**" 구조의 비정형 데이터를 저장하고 관리하기 위한 오픈 소스 기반의 **NoSQL**(비관계형 데이터베이스) 관리 시스템이다. 주로 **캐싱, 세션 관리, 메시지 브로커, 대기열 처리** 등 다양한 용도로 활용되고 있다.

---

### 🚀Redis의 특징

- **`인메모리 데이터 저장소`**: 데이터를 메모리에 저장하므로 빠른 응답속도를 제공
- **`영속성 지원`**: 디스크에 데이터를 주기적으로 저장하여 데이터의 지속성을 제공. 이를 통해 시스템 장애 시에도 데이터 손실을 방지할 수도 있다.
- **`다양한 Collection을 지원`**: **String, Lists, Sets, Sorted Sets, Hash** 자료 구조 지원
- **`트랜잭션 / 싱글 스레드`**: **싱글 스레드** 기반으로 동작한다. 멀티 명령어를 원자적으로 실행하는 트랜잭션을 지원한다. 이를 통해 여러 작업을 원자적으로 처리가 가능하다.
- **`클러스터링`**: **데이터 샤딩과 레플리케이션**을 통해 고가용성 및 확장성을 제공하는 클러스터를 구성할 수 있다.
- **`LRU 캐시 / 만료 시간`**: 데이터를 자동으로 관리하기 위해 **LRU (Least Recently Used)** 알고리즘과 **만료 시간(Time-to-Live)**을 지원한다.

---

### ✅실제 활용 사례

1. **`캐싱(Cashing)`**: 로그인 세션, JWT 관리, 일정 주기로 갱신해도 괜찮은 데이터(실시간 동기화가 중요하지 않은 데이터), 동일한 연산에 따른 결과 등
2. **`Pub/Sub 패턴`**: 실시간 채팅, 이벤트 메세징 처리
3. **`큐(Queue)`**: 우선 순위 큐, 메일 전송
4. **`실시간 분석`**: 순위(Rank)표, 실시간 이벤트 로그 처리 등

---

### ✅자주 사용하는 Cache 구조

1. **Look aside Cache**

   - 일반적으로 많이 사용되는 캐싱 전략이다.
   - 캐시에 데이터가 있으면 바로 가져와서 응답 해주고, 없다면 DB에서 데이터를 가져온 후 캐싱 해 준뒤 응답

   ![Look aside Cache](/assets/img/look_aside_cache.png)

   1. **`클라이언트`**가 **`웹 서버`**로 데이터 요청
   2. **`웹 서버`**는 **`Cache`**에 데이터가 있으면 **`클라이언트`**에게 **`Cache`**에서 가져온 데이터를 응답하고 끝낸다.
   3. 만약 **`Cache`**에 데이터가 없다면 **`웹 서버`**는 **`DB`**에서 데이터를 가져온다.
   4. **`웹 서버`**는 **`DB`**에서 가져온 데이터를 **`Cache`**에 저장한 후 **`클라이언트`**에게 해당 데이터를 응답한다.

   ***

2. **Write Back**

   - 로그같은 데이터를 대량으로 저장할때 **쿼리를 1번씩 수 백건 vs 쿼리를 수 백건 붙인걸 1번 날리기**
   - **Bulk Insert**

   ![Write Back](/assets/img/write_back.png)

   1. **`웹 서버`**는 모든 데이터를 **`Cache`**에만 저장한다.
   2. **`Cache`**에 특정 시간동안의 데이터가 저장 된다.
   3. 특정 시점마다 **`Cache`**에 있는 데이터를 **`DB`**에 저장한다.
   4. **`Cache`**에 저장된 데이터를 삭제한다.

---

### ✅Collection 사용시 주의할 점

- 하나의 **Collection에** 너무 **많은 아이템을 담지 말자**(**약 10,000개 이하** 수준으로 유지)
- **Expire는** Collection의 아이템 개별로 걸리지 않고 **전체 Collection에 대해서만 걸림**
  - 10,000개의 아이템을 가진 Collection에 **Expire**가 걸려있다면 그 시간 후에 **10,000개의 아이템이 모두 삭제**된다.

---

### 📝마무리

Redis에 대해 학습하고 정리하면서 장단점에 대해 확실히 알게되었다. 이론은 여기까지하고 다음 포스팅에선 Docker 위에서 Redis를 실행해서 실습해보는 포스팅으로 돌아옵니다!

---

### 🌐References

- [우아한레디스](https://youtu.be/mPB2CZiAkKM?si=1Pfwzsb1qcOEcF6J)

---
